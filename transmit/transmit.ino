static int codeon[]={380,2320,384,1160,388,1160,388,1160,1164,388,1168,380,1164,380,388,1168,380,1168,1164,388,1156,392,1156,388,1164,388,1164,388,380,1168,1164,380,388,1168,380,1168,1156,388,1164,388,1164,384,1164,388,1156,388,388,1160,384,1168,388,2320,384,1160,388,1160,388,1160,1164,392,1156,388,1164,388,380,1172,380,1168,1164,380,1164,388,1164,392,1164,388,1164,380,388,1164,1164,392,388,1160,388,1160,1164,384,1164,388,1164,388,1156,388,1164,384,388,1160,388,1168,384,2320,388,1160,388,1160,388,1160,1164,388,1164,380,1164,388,388,1164,388,1160,1164,388,1164,388,1164,388,1164,380,1164,388,384,1160,1164,388,388,1160,388,1160,1168,380,1164,388,1164,384,1164,388,1164,388,388,1168,380,1168,388,2320,388,1164,388,1160,388,1160,1164,388,1164,388,1164,380,388,1160,384,1168,1164,380,1172,380,1164,388,1160,388,1164,380,388,1168,1156,392,388,1168,380,1172,1156,380,1164,388,1164,388,1164,388,1164,380,396,1160,380,1172,3108,7288,520,1032,516,1040,512,1036,1036,524,1040,512,1036,524,516,1032,528,1036,1028,516,1040,520,1036,516,1040,520,1036,516,512,1040,1036,516,520,1032,516,1036,1040,520,1036,516,1040,520,1036,516,1040,520,512,1036,520,1040,3112,7292,512,1032,524,1032,516,1040,1036,516,1036,512,1036,524,512,1040,516,1032,1040,524,1036,512,1040,516,1036,520,1040,516,520,1036,1036,512,524,1032,516,1040,1036,512,1036,516,1036,520,1036,516,1036,520,516,1032,524,1044,3112,7288,516,1032,520,1036,516,1044,1036,512,1036,516,1036,520,520,1036,512,1036,1036,520,1036,516,1036,520,1036,516,1036,512,524,1032,1040,516,520,1036,512,1040,1036,516,1036,516,1040,520,1036,516,1040,520,512,1036,520,1044,3116,7288,512,1036,520,1032,516,1040,1032,524,1036,512,1040,524,512,1036,520,1032,1040,516,1036,524,1040,512,1036,524,1040,512,520,1036,1036,516,520,1032,520,1036,1036,516,1040,512,1036,524,1040,512,1036,516,520,1036,516};
static int codeoff[]={388,2308,388,1160,388,1160,388,1164,1164,388,388,1160,1156,388,388,1164,388,1160,1164,388,1168,384,1156,388,388,1160,388,1160,1160,388,1164,396,380,1160,1156,384,388,1160,1164,388,388,1160,1164,384,1164,380,396,1152,388,1168,384,2320,388,1160,384,1160,388,1160,1172,372,388,1160,1160,388,388,1160,388,1164,1164,396,1156,388,1156,392,380,1160,388,1160,1164,388,1164,384,388,1160,1156,388,388,1160,1164,388,388,1160,1164,388,1164,380,384,1168,380,1168,384,2320,388,1160,384,1164,388,1160,1156,388,388,1164,1156,388,388,1160,388,1160,1164,384,1156,388,1164,388,388,1160,384,1160,1164,388,1164,388,376,1168,1156,388,388,1160,1164,384,388,1160,1164,388,1164,388,384,1160,388,1160,388,2320,388,1168,380,1168,380,1164,1164,380,396,1152,1164,388,384,1160,388,1160,1164,388,1164,392,1164,380,388,1160,388,1168,1156,388,1164,388,388,1160,1168,380,388,1160,1164,388,380,1168,1160,380,1164,388,388,1164,388,1176,3104,7288,516,1040,512,1036,516,1044,1036,512,516,1040,1036,516,512,1044,516,1032,1036,524,1036,512,1036,524,512,1036,532,1032,1036,508,1036,520,516,1032,1036,524,516,1036,1036,520,516,1036,1036,520,1036,516,512,1044,512,1044,3116,7288,512,1040,516,1036,516,1040,1036,512,524,1032,1040,516,512,1044,512,1032,1040,524,1036,512,1040,520,512,1036,520,1036,1036,512,1036,524,512,1032,1036,524,512,1036,1036,520,512,1044,1036,512,1040,516,520,1040,508,1040,3116,7292,520,1032,516,1032,524,1036,1036,516,520,1032,1040,516,520,1036,512,1044,1036,512,1036,516,1036,520,516,1040,512,1036,1040,528,1028,516,524,1032,1036,516,520,1032,1040,512,520,1036,1036,516,1040,520,512,1036,520,1040,3116,7292,512,1036,512,1040,524,1036,1036,516,512,1036,1040,520,512,1044,516,1036,1040,520,1036,516,1040,512,524,1032,512,1044,1040,512,1036,516,520,1036,1036,512,524,1032,1036,516,524,1036,1036,512,1036,524,512,1032,528};
int ledState = LOW;
unsigned long previousMicros = 0;
int interval;
int loopindex=0;
void setup() {
  pinMode(2, OUTPUT);
  digitalWrite(2, ledState);
  Serial.begin(9600);
  Serial.println('hello');
}

void switch_off() {
  digitalWrite(2, LOW);
  delay(15);
  while ( true ){
  unsigned long currentMicros = micros();
  interval=codeoff[loopindex];
  if (currentMicros - previousMicros >= interval) {
    previousMicros = currentMicros;
    if (ledState == LOW) {
      ledState = HIGH;
    } else {
      ledState = LOW;
    }
    digitalWrite(2, ledState);
    loopindex++;
    if (loopindex == 399 ){
      loopindex=0;
      break;}}}}

void switch_on() {
  digitalWrite(2, LOW);
  delay(15);
  while ( true ){
  unsigned long currentMicros = micros();
  interval=codeon[loopindex];
  if (currentMicros - previousMicros >= interval) {
    previousMicros = currentMicros;
    if (ledState == LOW) {
      ledState = HIGH;
    } else {
      ledState = LOW;
    }
    digitalWrite(2, ledState);
    loopindex++;
    if (loopindex == 399 ){
      loopindex=0;
      break;}}}}

void loop(){
	if (Serial.available() > 0) {
		char in = (char)Serial.read();
                if (in == '1'){
		switch_on();}
		else if (in == '0'){
		switch_off();}}}
